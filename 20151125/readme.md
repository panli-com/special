# 程序修改日志

## 2015年12月3日09:08:30

>0.0.5Bat

1. 去掉第二次点击阻止请求服务器, 不管第几次点击都会去请求服务端，一切提示以服务端为先后判断为准

## 2015年12月2日17:45:11

>0.0.5

1. 已经领取鼠标 hover 样式 改为 小手
2. 已经领标记 点击不做任何事件操作



## 2015年12月2日09:18:12

>0.0.4

1. 数据接口回调后以领完的禁止在服务器响应，直接客户端做响应


## 2015年12月1日 10:23:17

>0.0.3

1. 修复点击第二次时 还去请求服务器 bug


## 2015年12月1日 09:24:55

>0.0.2

领取代金卷 逻辑

目前前端是这样解决的

每个代金卷的类型 用户只有第一次点击的时候 会去请求服务器

当第二次点击的时候不在会去请求服务器了，在客户端直接做上次服务返回的数据做相对应的 提示

### 第一次加载页面请求的 api 接口 获取抢代金券剩余数量 客户端自主请求

>/App_Services/wsSpecial.asmx/Coupon_NumberState

模拟接口数据

```
var moCoReact = [{"CouponType":50,"state":-1},{"CouponType":200,"state":-1},{"CouponType":300,"state":0},{"CouponType":0,"state":0}];
```

获取服务器返回值后，页面将会更新代金卷的 显示界面，当 接口数据的 `state` 的值为 `-1` 的话，
前端将会找到页面对应的 代金卷 类型（CouponType） 给 `state` 值为 `-1` 盖上以领完的标记，

当用户在点击的时候不在请求服务器，
客户端直接响应 `4` = 啊喔, 这张券已经被大家抢光了呢;

> 值得注意的是 > 请在 html 页面 对应输出 api 接口返回的 代金卷类型 （CouponType）;

对应找到页面 的值 为 `#coupon-type- + 类型`



### 举例说明 用户自主点击行为

>/App_Services/wsSpecial.asmx/getDouble12?userName=ksy123123&UserID=B61654B9-6E87-4A40-93D3-F6ACFC324927&cotype=%E6%BB%A1100%E5%87%8F5

```
var text = [
    "恭喜您成功抢到代金券",
    "每个人只能领两张券哦",
    "这张券已经抢过了哦",
    "啊喔, 这张券已经被大家抢光了呢"
  ];  
```

上面一个数组 分别对应 1，2，3，4


> 第一次

第一次点击领取，服务器返回 `1` = 恭喜您成功抢到代金券

当第二次再次点击这个代金卷的时候 客户端直接响应  `3`  = 这张券已经抢过了哦

> 当用户已经领过 2 张了  再次刷新页面再领取的时候

点击领取 服务器返回 `2` =   每个人只能领两张券哦

再点击的时候不再去请求服务器 , 客户端直接响应  `2`  = 每个人只能领两张券哦
